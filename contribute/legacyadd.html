---
layout: default
title: Add to DB
---

<style>
  .success {
    color: green;
  }

  .error {
    color: red;
  }
    
  /* Add a background color and padding to the form */
  form {
    background-color: #a38f84;
    padding: 20px;
    border: 1px solid #ccc;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
  }

  /* Style the form fields */
  label {
    display: block;
    margin-bottom: 10px;
    font-family: "Merriweather"
  }

  input, select, textarea {
    width: 65%;
    padding: 10px;
    margin-bottom: 20px;
    border: 1px solid #ded1cc;
  }

  /* Add a button style */
  button[type="submit"] {
    background-color: #4CAF50;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  /* Add a hover effect to the button */
  button[type="submit"]:hover {
    background-color: #3e8e41;
  }
</style>

<h1 style="text-align: center;">Contribute to the Plant Database</h1>
<p style="padding: 10px; text-align: center;"><a href="https://botanybase.github.io">Back</a></p>
<form id="plantForm" style="text-align: center; display: block; margin: 0 auto;">
  <input type="hidden" name="workflow_name" value="add-plant">
  <input type="hidden" name="workflow_dispatch_input" value='{"name":"{{name}}","image":"{{image}}","climate":"{{climate}}","description":"{{description}}"}'>
  <label for="name">Plant Name:</label>
  <input type="text" name="name" required><br><br>
  <label for="image">Plant Image URL:</label>
  <input type="url" name="image" required><br><br>
  <label for="climate">Plant Climate:</label>
  <select name="climate" required>
    <option value="tropical">Tropical</option>
    <option value="subtropical">Subtropical</option>
    <option value="temperate">Temperate</option>
    <option value="alpine">Alpine</option>
    <option value="desert">Desert</option>
  </select><br><br>
  <label for="description">Plant Description:</label><br>
  <textarea name="description" required></textarea><br><br>
  <button type="submit">Add Plant</button>
</form>

<div id="message"></div>

<script>
const form = document.getElementById('plantForm');
form.addEventListener('submit', async (event) => {
  event.preventDefault();

  const name = document.getElementById('name').value;
  const image = document.getElementById('image').value;
  const climate = document.getElementById('climate').value;
  const description = document.getElementById('description').value;

  const data = {
    title: `New Plant Submission: ${name}`,
    body: `
      **Plant Name:** ${name}
      **Plant Image URL:** ${image}
      **Plant Climate:** ${climate}
      **Plant Description:**
      ${description}
    `
  };

  try {
    const response = await fetch('/repos/BotanyBase/botanybase.github.io/dispatches', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer YOUR_PERSONAL_ACCESS_TOKEN'  // Replace with your token
      },
      body: JSON.stringify(data)
    });

    if (response.ok) {
      const message = document.getElementById('message');
      message.innerHTML = 'Submission successful!';
      message.classList.add('success');
    } else {
      throw new Error('Failed to create issue.');
    }
  } catch (error) {
    const message = document.getElementById('message');
    message.innerHTML = 'Error: ' + error.message;
    message.classList.add('error');
  }
});
</script>

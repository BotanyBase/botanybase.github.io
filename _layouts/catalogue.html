---
layout: default
---

{{ content }}

<!-- catalogue.html -->

<input type="search" id="search-input" placeholder="Search plants">

<!-- Get the climate variable from the front matter -->
{% assign climate = page.climate | default: "All Climates" %}

<!-- Fetch the _plants collection and assign it to site.plants -->
{% assign site.plants = site._plants | sort: 'name' %}

<!-- Filter the plants by climate -->
{% assign filtered_plants = site.plants | where: "climate", climate %}

<div class="plant-entries" data-filtered-plants="{{ filtered_plants | to_json }}">
  {% for plant in filtered_plants %}
   <h2>{{ plant.name }}</h2>
   <p>{{ plant.description }}</p>
   <img src="{{ plant.image }}" alt="{{ plant.name }}">
  {% endfor %}
</div>

<script>
const searchInput = document.getElementById('search-input');
const plantEntriesContainer = document.querySelector('.plant-entries');

const filteredPlantsData = plantEntriesContainer.dataset.filteredPlants;
if (filteredPlantsData) {
  const filtered_plants = JSON.parse(filteredPlantsData);
  searchInput.addEventListener('input', () => {
    const searchString = searchInput.value.toLowerCase();
    const filteredPlants = filtered_plants.filter(plant => {
      const plantName = plant.name.toLowerCase();
      return plantName.includes(searchString);
    });
    appendPlantsToContainer(filteredPlants);
  });
} else {
  console.log("No filtered plants data found");
}

function appendPlantsToContainer(plants) {
  plantEntriesContainer.innerHTML = ''; // clear the container
  plants.forEach(plant => {
    const plantEntryHTML = `
      <h2>${plant.name}</h2>
      <p>${plant.description}</p>
      <img src="${plant.image}" alt="${plant.name}">
    `;
    const plantEntryElement = document.createElement('div');
    plantEntryElement.innerHTML = plantEntryHTML;
    plantEntriesContainer.appendChild(plantEntryElement);
  });
}
</script>
